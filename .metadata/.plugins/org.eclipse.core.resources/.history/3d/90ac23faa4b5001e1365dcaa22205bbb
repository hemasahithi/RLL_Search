package Steps;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.PageFactory;
import io.cucumber.java.en.Given;

import io.cucumber.java.en.When;
import junit.framework.Assert;
import pagefactory.Searchpage;


public class Searchsteps {
	Logger logger = LogManager.getLogger(Searchsteps.class);
	  
	WebDriver driver = new ChromeDriver();
	
	
    public Searchpage searchPage;
    
    
    
    @Given("I open the browser and enter the URL")
    public void iOpenTheBrowserAndEnterTheURL() {
    	logger.info("Chilternoak Furniture Homepage");
    	 searchPage = new Searchpage();
    	driver = new ChromeDriver();
        driver.manage().window().maximize();
        driver.get("https://www.chilternoakfurniture.co.uk/");
        searchPage= PageFactory.initElements(driver, Searchpage.class);
        

        
    }

    @When("I enter a valid product name as {string} in the search bar")
    public void iEnterAValidProductNameInTheSearchBar(String productName) {
    	logger.info( "entering valid product name");
        searchPage.enterSearchTerm(productName);
        String Actual_result1=driver.findElement(By.xpath("//input[@class='main-search__input']")).getText();
        String Expected_Result1="sofa";
        Assert.assertEquals(Actual_result1, Expected_Result1);
        System.out.println("Testcase1- Passed");
        String Actual_result2=driver.findElement(By.xpath("//input[@type='text']")).getText();
        String Expected_Result2="";
        Assert.assertEquals(Actual_result2, Expected_Result2);
        System.out.println("Testcase2- Passed");
        String Actual_result3=driver.findElement(By.xpath("//input[@type='text']")).getText();
        String Expected_Result3="perfumes";
        Assert.assertEquals(Actual_result3, Expected_Result3);
        System.out.println("Testcase3- Passed");
        String Actual_result4=driver.findElement(By.xpath("//input[@type='text']")).getText();
        String Expected_Result4="chopa";
        Assert.assertEquals(Actual_result1, Expected_Result1);
        System.out.println("Testcase4- Passed");
        String Actual_result5=driver.findElement(By.xpath("//input[@type='text']")).getText();
        String Expected_Result5="Industrial Tan 90cm Studded Back Bench";
        Assert.assertEquals(Actual_result5, Expected_Result5);
        System.out.println("Testcase5- Passed");
        
        
    }

    @When("I click on the search button")
    public void iClickOnTheSearchButton() {
    	logger.info("clicking on search button");
        searchPage.clickSearchButton();
        driver.close();
    }
    
    
		
    	
        	
        }

    
    